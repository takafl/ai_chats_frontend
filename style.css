@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Fira+Code:wght@400;500;600&display=swap');

/* =========================================================
   Design Tokens - Calm Professional Palette
   ========================================================= */
:root {
  /* Primary - Soft indigo blue for calm professionalism */
  --primary: #5c6bc0;
  --primary-light: #7986cb;
  --primary-dark: #3f51b5;
  --primary-glow: rgba(92,107,192,0.12);
  --primary-subtle: rgba(92,107,192,0.06);

  /* Neutral surfaces - Warm grays for comfort */
  --surface: #ffffff;
  --surface-2: #fafbfc;
  --surface-3: #f4f6f8;
  --surface-hover: #eef1f4;

  --text: #2d3748;
  --text-2: #4a5568;
  --text-3: #a0aec0;
  --text-muted: #cbd5e0;

  --border: #e2e8f0;
  --border-2: #cbd5e0;
  --border-focus: #5c6bc0;

  --sidebar-bg: #fafbfc;
  --topbar-bg: rgba(250,251,252,0.95);
  --chat-bg: #f7f8fa;
  --bot-bubble: #ffffff;
  --user-bubble: rgba(92,107,192,0.06);
  --code-bg: #1a202c;

  /* Semantic colors - Soft and professional */
  --success: #48bb78;
  --success-bg: #f0fff4;
  --success-border: #9ae6b4;
  --success-text: #276749;

  --error: #f56565;
  --error-bg: #fff5f5;
  --error-border: #feb2b2;
  --error-text: #c53030;

  --warning: #ed8936;
  --warning-bg: #fffaf0;
  --warning-border: #fbd38d;
  --warning-text: #c05621;

  --info: #4299e1;
  --info-bg: #ebf8ff;
  --info-border: #90cdf4;
  --info-text: #2b6cb0;

  /* Shadows - Subtle and elegant */
  --shadow-xs: 0 1px 2px rgba(0,0,0,0.04);
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 4px 6px rgba(0,0,0,0.05), 0 2px 4px rgba(0,0,0,0.04);
  --shadow-lg: 0 10px 15px rgba(0,0,0,0.06), 0 4px 6px rgba(0,0,0,0.04);
  --shadow-xl: 0 20px 25px rgba(0,0,0,0.08), 0 10px 10px rgba(0,0,0,0.04);

  --radius: 10px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --ease: cubic-bezier(0.4,0,0.2,1);
  --ease-bounce: cubic-bezier(0.34,1.56,0.64,1);
  --app-vh: 1vh;

  /* Avatar colors - Subtle gradients */
  --avatar-user: linear-gradient(135deg, #5c6bc0, #7986cb);
  --avatar-bot: linear-gradient(135deg, #48bb78, #38a169);
}

html.dark {
  --primary: #7986cb;
  --primary-light: #9fa8da;
  --primary-dark: #5c6bc0;
  --primary-glow: rgba(121,134,203,0.15);
  --primary-subtle: rgba(121,134,203,0.08);

  --surface: #1a202c;
  --surface-2: #2d3748;
  --surface-3: #4a5568;
  --surface-hover: #718096;

  --text: #f7fafc;
  --text-2: #e2e8f0;
  --text-3: #718096;
  --text-muted: #4a5568;

  --border: rgba(226,232,240,0.1);
  --border-2: rgba(226,232,240,0.15);
  --border-focus: #7986cb;

  --sidebar-bg: rgba(26,32,44,0.98);
  --topbar-bg: rgba(26,32,44,0.95);
  --chat-bg: #171923;
  --bot-bubble: rgba(45,55,72,0.95);
  --user-bubble: rgba(121,134,203,0.08);
  --code-bg: #0d1117;

  /* Semantic colors - Dark mode */
  --success: #68d391;
  --success-bg: rgba(104,211,145,0.1);
  --success-border: rgba(104,211,145,0.2);
  --success-text: #68d391;

  --error: #fc8181;
  --error-bg: rgba(252,129,129,0.1);
  --error-border: rgba(252,129,129,0.2);
  --error-text: #fc8181;

  --warning: #f6ad55;
  --warning-bg: rgba(246,173,85,0.1);
  --warning-border: rgba(246,173,85,0.2);
  --warning-text: #f6ad55;

  --info: #63b3ed;
  --info-bg: rgba(99,179,237,0.1);
  --info-border: rgba(99,179,237,0.2);
  --info-text: #63b3ed;

  --shadow-xs: 0 1px 2px rgba(0,0,0,0.2);
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.3), 0 1px 2px rgba(0,0,0,0.2);
  --shadow-md: 0 4px 6px rgba(0,0,0,0.35), 0 2px 4px rgba(0,0,0,0.25);
  --shadow-lg: 0 10px 15px rgba(0,0,0,0.4), 0 4px 6px rgba(0,0,0,0.3);
  --shadow-xl: 0 20px 25px rgba(0,0,0,0.5), 0 10px 10px rgba(0,0,0,0.4);

  --avatar-user: linear-gradient(135deg, #7986cb, #9fa8da);
  --avatar-bot: linear-gradient(135deg, #68d391, #48bb78);
}

/* =========================================================
   Reset
   ========================================================= */
*,*::before,*::after{box-sizing:border-box}
html{width:100%;height:100%;overflow:hidden;overscroll-behavior:none}
body{
  font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  width:100%;height:calc(var(--app-vh)*100);min-height:calc(var(--app-vh)*100);
  overflow:hidden;overscroll-behavior:none;
  background:var(--chat-bg);color:var(--text);
  transition:background-color .3s ease,color .3s ease;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
html,body,main,#chat-container,#chat-box{overflow-x:hidden}

/* =========================================================
   Layout
   ========================================================= */
main{margin-top:0;height:calc(var(--app-vh)*100);display:flex;flex-direction:column;min-height:0}
#chat-container{display:flex;flex:1 1 auto;overflow:hidden;min-height:0;min-width:0}
#chat-container>aside,#chat-container>div{height:100%;min-height:0}
#chat-container>div{display:flex;flex-direction:column;min-height:0;min-width:0}
#chat-container>div,#chat-container>aside,.msg-bubble{min-width:0}

/* =========================================================
   Sidebar
   ========================================================= */
#sidebar{
  width:280px;flex:0 0 280px;
  background:var(--sidebar-bg);
  border-right:1px solid var(--border);
  backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
}
.glass-sidebar{backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px)}
#sidebar-overlay.hidden{display:none!important;pointer-events:none!important}

/* Mobile sidebar animation */
@media(max-width:767px){
  #sidebar{
    transform:translateX(-100%);
    transition:transform .3s var(--ease);
  }
  #sidebar.active{
    transform:translateX(0);
  }
}

/* =========================================================
   Topbar
   ========================================================= */
#topbar{
  background:var(--topbar-bg);
  backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);
  border-bottom:1px solid var(--border);
}

/* =========================================================
   Select / Dropdown
   ========================================================= */
select{
  cursor:pointer;
  -webkit-appearance:none;-moz-appearance:none;appearance:none;
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%239095ab' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
  background-repeat:no-repeat;background-position:right 8px center;
  padding-right:24px!important;
}
select option{padding:8px 12px;font-family:'Inter',sans-serif;font-size:13px}
html:not(.dark) select option{background:#ffffff!important;color:#2d3748!important}
html.dark select option{background:#2d3748!important;color:#f7fafc!important}
html.dark select option:checked{background:#4a5568!important;color:#f7fafc!important}

.select-pill{
  display:flex;align-items:center;gap:6px;
  background:var(--surface);border:1px solid var(--border);
  padding:6px 10px 6px 12px;border-radius:999px;
  transition:all .2s var(--ease);
  box-shadow:var(--shadow-xs);
}
.select-pill:hover{border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-glow)}
.select-pill select{background:transparent;border:none;outline:none;font-size:12px;font-weight:500;color:var(--text)}

/* =========================================================
   Quota
   ========================================================= */
#quota-panel{background:var(--surface);border-bottom:1px solid var(--border)}
html.dark #quota-panel{background:var(--surface-2)}
#quota-fill{
  background:linear-gradient(90deg,var(--primary),var(--primary-light));
  border-radius:999px;
  transition:width .6s var(--ease);
}
#quota-text{overflow-wrap:anywhere;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}

/* =========================================================
   Chat Area
   ========================================================= */
#chat-box{
  flex:1 1 auto;min-height:0;
  overflow-y:auto;overflow-x:hidden;
  scroll-behavior:smooth;
  background:var(--chat-bg);
  padding-bottom:0;
}
#chat-box::-webkit-scrollbar{width:6px}
#chat-box::-webkit-scrollbar-track{background:transparent}
#chat-box::-webkit-scrollbar-thumb{background:var(--text-muted);border-radius:10px}
#chat-box::-webkit-scrollbar-thumb:hover{background:var(--text-3)}

/* =========================================================
   Message Avatars
   ========================================================= */
.msg-avatar{
  width:36px;
  height:36px;
  min-width:36px;
  min-height:36px;
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  flex-shrink:0;
}

.msg-avatar-user{
  background:var(--avatar-user);
  box-shadow:0 2px 8px var(--primary-glow);
}

.msg-avatar-bot{
  background:var(--avatar-bot);
  box-shadow:0 2px 8px rgba(72,187,120,0.15);
}

.msg-avatar svg{
  display:block;
  stroke:white!important;
  fill:none;
}

/* =========================================================
   Chat Bubbles
   ========================================================= */
.msg-bubble{
  border-radius:var(--radius-xl);
  max-width:min(85%,48rem);width:fit-content;
  overflow-wrap:anywhere;word-break:break-word;hyphens:auto;
  transition:box-shadow .2s var(--ease);
}
.msg-bubble.msg-bot{
  background:var(--bot-bubble)!important;
  border:1px solid var(--border);
  box-shadow:var(--shadow-sm);
}
.msg-bubble.msg-user{
  background:var(--user-bubble)!important;
  border:1px solid rgba(92,107,192,0.1);
}
html.dark .msg-bubble.msg-bot{background:var(--bot-bubble)!important;border-color:var(--border)!important;box-shadow:var(--shadow-md)}
html.dark .msg-bubble.msg-user{background:var(--user-bubble)!important;border-color:rgba(121,134,203,0.12)!important}

/* =========================================================
   Markdown / Prose
   ========================================================= */
.prose{max-width:100%!important;line-height:1.7!important;color:inherit!important;overflow-wrap:anywhere!important;word-break:break-word!important;hyphens:auto;direction:ltr;text-align:left}
.prose p{margin-bottom:1rem!important}
.prose strong{color:inherit!important;font-weight:600}
.prose,.prose *{max-width:100%}
.prose a{color:var(--primary);text-decoration:underline;text-decoration-color:var(--primary-glow);text-underline-offset:2px;overflow-wrap:anywhere;word-break:break-word;transition:color .2s ease}
.prose a:hover{color:var(--primary-dark)}
.prose img,.prose video,.prose iframe,.prose canvas,.prose svg{max-width:100%!important;height:auto!important;border-radius:var(--radius)}
.prose table{display:block;max-width:100%!important;overflow-x:auto;border-collapse:collapse}
.prose table th,.prose table td{padding:10px 14px;border:1px solid var(--border);font-size:.9em}
.prose table th{background:var(--surface-3);font-weight:600}

/* Inline code */
.prose :not(pre)>code{
  font-family:"Fira Code",ui-monospace,SFMono-Regular,Menlo,monospace!important;
  font-size:.85em!important;line-height:1.6;unicode-bidi:plaintext;
  padding:3px 8px;border-radius:6px;
  border:1px solid var(--border);background:var(--surface-3);color:var(--primary-dark);
}
html.dark .prose :not(pre)>code{background:rgba(121,134,203,0.1);border-color:rgba(121,134,203,0.2);color:var(--primary-light)}

/* Code blocks */
.prose pre,.prose code,.prose pre code{direction:ltr!important;text-align:left!important;unicode-bidi:plaintext}
.prose pre{
  overflow:auto!important;max-width:100%!important;white-space:pre;tab-size:4;line-height:1.6;font-size:.875em;
  border-radius:var(--radius-lg);padding:16px 20px;margin:14px 0;
  border:1px solid var(--border);background:var(--code-bg)!important;position:relative;
  max-height:min(45vh,calc((var(--app-vh)*100) - 18rem))!important;
}
.prose pre code{display:block!important;background:transparent!important;border:none!important;padding:0!important;font-size:inherit!important}

/* Copy button */
.copy-btn{
  position:absolute;right:10px;top:10px;
  padding:5px 12px;
  background:rgba(45,55,72,0.9);
  border:1px solid rgba(226,232,240,0.1);
  border-radius:6px;
  color:#a0aec0;
  font-size:11px;font-weight:500;
  cursor:pointer;
  opacity:0;
  transition:all .2s var(--ease);
  backdrop-filter:blur(8px);
}
.prose pre:hover .copy-btn{opacity:1}
.copy-btn:hover{background:rgba(74,85,104,0.9);color:#e2e8f0}
.copy-btn.copied{background:rgba(72,187,120,0.2);color:#48bb78;border-color:rgba(72,187,120,0.3)}

/* =========================================================
   Direction
   ========================================================= */
.msg-rtl{direction:rtl;text-align:right}
.msg-ltr{direction:ltr;text-align:left}

/* =========================================================
   Composer
   ========================================================= */
#chat-box+div{flex:0 0 auto;padding-top:8px;padding-bottom:8px}
#composer{
  flex-wrap:nowrap!important;gap:.5rem;padding:8px 10px;
  border-radius:var(--radius-xl);background:var(--surface);
  border:1px solid var(--border);box-shadow:var(--shadow-lg);
  transition:all .25s var(--ease);
}
html.dark #composer{background:var(--surface-2);border-color:var(--border-2)}
#composer:focus-within{border-color:var(--primary);box-shadow:0 0 0 3px var(--primary-glow),var(--shadow-lg)}
#composer textarea,#user-in{
  min-height:44px!important;max-height:140px!important;
  overflow-y:auto!important;
  padding-top:10px!important;padding-bottom:10px!important;
  font-size:14px;line-height:22px;
  color:var(--text);background:transparent;
}

/* =========================================================
   Send Button
   ========================================================= */
#send-btn{
  width:40px;height:40px;min-width:40px;min-height:40px;
  border-radius:50%;
  background:var(--avatar-user);
  color:white;border:none;
  box-shadow:0 2px 8px var(--primary-glow);
  transition:all .2s var(--ease);
  display:flex;align-items:center;justify-content:center;
  flex-shrink:0;
  cursor:pointer;
}
#send-btn:hover{
  transform:translateY(-1px);
  box-shadow:0 4px 12px var(--primary-glow);
}
#send-btn:active{transform:scale(0.95)}

/* Stop / streaming state */
#send-btn.stop-btn{
  background:linear-gradient(135deg,#f56565,#e53e3e)!important;
  box-shadow:0 2px 8px rgba(245,101,101,0.2)!important;
  animation:gentle-pulse 2s ease-in-out infinite;
}

@keyframes gentle-pulse{
  0%,100%{box-shadow:0 2px 8px rgba(245,101,101,0.2)}
  50%{box-shadow:0 2px 16px rgba(245,101,101,0.35)}
}

.spin-icon{animation:spin 0.8s linear infinite}
@keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

/* =========================================================
   Sidebar Buttons
   ========================================================= */
#new-chat-btn{
  background:var(--avatar-user);
  box-shadow:0 2px 8px var(--primary-glow);
  border:none;
  transition:all .2s var(--ease);
}
#new-chat-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px var(--primary-glow)}

#clear-history{
  background:rgba(245,101,101,0.04);
  border:1px solid rgba(245,101,101,0.12);
  color:#f56565;
  box-shadow:none;
  transition:all .2s var(--ease);
}
#clear-history:hover{background:rgba(245,101,101,0.08);border-color:rgba(245,101,101,0.2)}
html.dark #clear-history{background:rgba(252,129,129,0.04);border-color:rgba(252,129,129,0.12);color:#fc8181}

/* =========================================================
   Selection / Retry / Animations
   ========================================================= */
.selection-action-btn{
  position:absolute;z-index:50;
  background:var(--primary);color:#fff;border:none;
  padding:6px 12px;border-radius:999px;
  font-size:11px;font-weight:600;
  box-shadow:0 2px 8px var(--primary-glow);
  cursor:pointer;
}
.selection-action-btn.hidden{display:none}

.retry-btn{
  display:inline-flex;align-items:center;
  padding:8px 16px;border-radius:var(--radius);
  border:1px solid rgba(92,107,192,0.25);
  background:rgba(92,107,192,0.06);
  color:var(--primary);
  font-weight:600;font-size:.85rem;
  cursor:pointer;
  transition:all .2s var(--ease);
}
.retry-btn:hover{background:rgba(92,107,192,0.12)}
.retry-btn:disabled{opacity:.5;cursor:not-allowed}

.fade-in{animation:fadeIn .35s var(--ease)}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

.thinking-pulse{animation:pulse 2s ease-in-out infinite;color:var(--primary)}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.4}}

/* =========================================================
   Utilities
   ========================================================= */
.no-scrollbar{scrollbar-width:none;-ms-overflow-style:none}
.no-scrollbar::-webkit-scrollbar{display:none}
.line-clamp-2{display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.line-clamp-3{display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical;overflow:hidden}
@supports(padding:max(0px)){.safe-bottom{padding-bottom:max(1rem,env(safe-area-inset-bottom))}}

/* =========================================================
   Theme Toggle
   ========================================================= */
theme-toggle{display:block!important;position:fixed!important;z-index:9999!important;right:16px!important;bottom:16px!important;left:auto!important;top:auto!important}
@media(max-width:767px){theme-toggle{bottom:80px!important}}

/* =========================================================
   Mobile
   ========================================================= */
@media(max-width:767px){
  #topbar{padding:8px 12px!important;gap:8px!important}
  #current-project-name{font-size:10px!important;line-height:12px!important}
  #current-chat-title{font-size:13px!important;line-height:16px!important;max-width:40vw!important;white-space:nowrap!important;overflow:hidden!important;text-overflow:ellipsis!important}
  #model-select,#thinking-level{font-size:11px!important}
  #topbar>div:last-child{flex-wrap:nowrap!important;overflow-x:auto!important;-webkit-overflow-scrolling:touch;max-width:65vw}
  #quota-panel{flex-direction:column;align-items:flex-start;gap:.5rem;padding:8px 12px}
  #quota-panel>div{width:100%}
  #chat-box{padding-left:12px;padding-right:12px}
}
@media(max-width:640px){
  #sidebar{width:85vw;flex-basis:85vw}
  #quota-text{font-size:11px;line-height:1.25}
  #composer textarea,#user-in{font-size:15px;max-height:120px!important}
  #attach-btn{padding:10px}
  #send-btn{border-radius:12px}
  .msg-avatar{width:30px;height:30px;min-width:30px;min-height:30px;border-radius:8px}
  .msg-avatar svg{width:14px;height:14px}
}

/* Modal */
#project-settings-modal>div{background:var(--surface);border:1px solid var(--border);box-shadow:var(--shadow-xl)}
html.dark #project-settings-modal>div{background:var(--surface-2);border-color:var(--border-2)}

/* =========================================================
   Toast Notifications - Professional Design
   ========================================================= */
.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 10000;
  display: flex;
  flex-direction: column;
  gap: 10px;
  max-width: 380px;
  pointer-events: none;
}

@media (max-width: 640px) {
  .toast-container {
    top: 12px;
    right: 12px;
    left: 12px;
    max-width: none;
  }
}

.toast {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 14px 16px;
  padding-bottom: 18px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-xl);
  opacity: 0;
  transform: translateX(20px);
  transition: all 0.3s var(--ease);
  pointer-events: auto;
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
}

@media (max-width: 640px) {
  .toast {
    padding: 12px 14px;
    padding-bottom: 16px;
  }
}

.toast.show {
  opacity: 1;
  transform: translateX(0);
}

.toast.hide {
  opacity: 0;
  transform: translateX(20px) scale(0.95);
  transition: all 0.25s ease-out;
}

.toast-icon {
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  margin-top: 1px;
}

.toast-content {
  flex: 1;
  min-width: 0;
}

.toast-type-label {
  display: block;
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 2px;
  opacity: 0.7;
}

.toast-message {
  font-size: 13px;
  line-height: 1.45;
  color: var(--text);
  font-weight: 500;
  word-break: break-word;
}

.toast-close {
  flex-shrink: 0;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: var(--text-3);
  cursor: pointer;
  border-radius: 4px;
  transition: all 0.15s ease;
  padding: 0;
  margin-top: 1px;
}

.toast-close:hover {
  background: var(--surface-3);
  color: var(--text-2);
}

/* Toast progress bar */
.toast-progress {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: var(--surface-3);
  overflow: hidden;
}

.toast-progress-bar {
  height: 100%;
  width: 100%;
  transform-origin: left;
  animation: toast-progress 4s linear forwards;
}

@keyframes toast-progress {
  from { transform: scaleX(1); }
  to { transform: scaleX(0); }
}

/* Toast variants */
.toast-success {
  border-color: var(--success-border);
  background: var(--success-bg);
}
.toast-success .toast-icon { color: var(--success); }
.toast-success .toast-type-label { color: var(--success-text); }
.toast-progress-success { background: var(--success); }

.toast-error {
  border-color: var(--error-border);
  background: var(--error-bg);
}
.toast-error .toast-icon { color: var(--error); }
.toast-error .toast-type-label { color: var(--error-text); }
.toast-progress-error { background: var(--error); }

.toast-warning {
  border-color: var(--warning-border);
  background: var(--warning-bg);
}
.toast-warning .toast-icon { color: var(--warning); }
.toast-warning .toast-type-label { color: var(--warning-text); }
.toast-progress-warning { background: var(--warning); }

.toast-info {
  border-color: var(--info-border);
  background: var(--info-bg);
}
.toast-info .toast-icon { color: var(--info); }
.toast-info .toast-type-label { color: var(--info-text); }
.toast-progress-info { background: var(--info); }

/* Dark mode toast adjustments */
html.dark .toast {
  background: var(--surface-2);
  border-color: var(--border-2);
}

html.dark .toast-success {
  background: var(--success-bg);
  border-color: var(--success-border);
}
html.dark .toast-success .toast-type-label { color: var(--success-text); }

html.dark .toast-error {
  background: var(--error-bg);
  border-color: var(--error-border);
}
html.dark .toast-error .toast-type-label { color: var(--error-text); }

html.dark .toast-warning {
  background: var(--warning-bg);
  border-color: var(--warning-border);
}
html.dark .toast-warning .toast-type-label { color: var(--warning-text); }

html.dark .toast-info {
  background: var(--info-bg);
  border-color: var(--info-border);
}
html.dark .toast-info .toast-type-label { color: var(--info-text); }

/* =========================================================
   Form Validation Styles
   ========================================================= */
.form-field {
  position: relative;
  margin-bottom: 20px;
}

.form-field-input {
  width: 100%;
  padding: 12px 14px;
  font-size: 14px;
  border: 2px solid var(--border);
  border-radius: var(--radius);
  background: var(--surface);
  color: var(--text);
  transition: all 0.2s var(--ease);
  outline: none;
  font-family: inherit;
}

.form-field-input:hover {
  border-color: var(--border-2);
}

.form-field-input:focus {
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px var(--primary-glow);
}

.form-field-input.valid {
  border-color: var(--success);
  padding-right: 40px;
}

.form-field-input.invalid {
  border-color: var(--error);
  padding-right: 40px;
  animation: shake-input 0.4s ease;
}

@keyframes shake-input {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-6px); }
  50% { transform: translateX(6px); }
  75% { transform: translateX(-3px); }
}

.form-field-icon {
  position: absolute;
  right: 14px;
  top: 50%;
  transform: translateY(-50%);
  width: 18px;
  height: 18px;
  pointer-events: none;
}

.form-field-icon.success { color: var(--success); }
.form-field-icon.error { color: var(--error); }

.form-field-hint {
  display: block;
  margin-top: 6px;
  font-size: 12px;
  color: var(--text-3);
  line-height: 1.4;
}

.form-field-error {
  display: block;
  margin-top: 6px;
  font-size: 12px;
  color: var(--error);
  font-weight: 500;
  line-height: 1.4;
}

.form-field-success {
  display: block;
  margin-top: 6px;
  font-size: 12px;
  color: var(--success);
  font-weight: 500;
  line-height: 1.4;
}

/* Loading button state */
.btn-loading {
  position: relative;
  pointer-events: none;
  color: transparent !important;
}

.btn-loading::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 18px;
  height: 18px;
  border: 2px solid rgba(255,255,255,0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: spin 0.7s linear infinite;
}

html.dark .btn-loading::after {
  border-color: rgba(255,255,255,0.2);
  border-top-color: white;
}

/* Skeleton loading */
.skeleton {
  background: linear-gradient(90deg, var(--surface-3) 25%, var(--surface-hover) 50%, var(--surface-3) 75%);
  background-size: 200% 100%;
  animation: skeleton-loading 1.5s ease-in-out infinite;
  border-radius: var(--radius);
}

@keyframes skeleton-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Focus ring utility */
.focus-ring:focus {
  outline: none;
  box-shadow: 0 0 0 3px var(--primary-glow);
  border-color: var(--border-focus);
}

/* Transition utilities */
.transition-smooth {
  transition: all 0.3s var(--ease);
}

.transition-fast {
  transition: all 0.15s var(--ease);
}

/* =========================================================
   Input Validation Visual States
   ========================================================= */
input.is-invalid,
textarea.is-invalid {
  border-color: var(--error) !important;
  background: var(--error-bg) !important;
}

input.is-valid,
textarea.is-valid {
  border-color: var(--success) !important;
}

/* =========================================================
   Empty State
   ========================================================= */
#empty-state {
  animation: fadeIn 0.5s var(--ease);
}

#empty-state h2 {
  font-weight: 600;
  letter-spacing: -0.01em;
}

#empty-state p {
  max-width: 320px;
}
